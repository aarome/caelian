{"version":3,"sources":["donorbox.js"],"names":["w","d","extractUtmParams","data","queryString","window","location","href","split","supportedUtmParams","params","map","p","splitted","key","value","indexOf","toggleScrolling","disable","body","style","overflow","remove","el","parentNode","removeChild","queryButtons","links","getElementsByClassName","buttonClass","arr","arrayLike","Array","prototype","slice","call","DonorBox","widgetLinkClassName","concat","shouldOpenNewTab","agent","navigator","userAgent","toLowerCase","test","substr","addEventListener","target","ev","listener","attachEvent","openTheModal","e","preventDefault","currentTarget","frame","createElement","id","frameID","frameborder","setAttribute","src","setFrameStyles","appendChild","focus","Object","keys","UTM_PARAMS","length","onload","contentWindow","postMessage","action","msg","DBOX_INSTALLED","position","display","left","top","width","height","margin","padding","border","overflowX","overflowY","visibility","backgroundColor","zIndex","dw_open","buttons","i","len","from","close","getElementById","document"],"mappings":"CAAC,SAAUA,EAAGC,GACZ,YAOA,SAASC,KACP,GAAIC,MACAC,EAAcC,OAAOC,SAASC,KAAKC,MAAM,KAAK,EAClD,IAAIJ,EAAa,CACf,GAAIK,IAAsB,aAAc,eAAgB,aAAc,WAAY,eAC9EC,EAASN,EAAYI,MAAM,IAC/BE,GAAOC,IAAI,SAAUC,GACnB,GAAIC,GAAWD,EAAEJ,MAAM,KACrBM,EAAMD,EAAS,GACfE,EAAQF,EAAS,EAEfJ,GAAmBO,QAAQF,IAAQ,IACrCX,EAAKW,GAAOC,KAKlB,MAAOZ,GAsBT,QAASc,GAAgBC,GACvBjB,EAAEkB,KAAKC,MAAMC,SAAWH,EAAU,SAAW,OAG/C,QAASI,GAAOC,GACdA,EAAGC,WAAWC,YAAYF,GAC1BN,IAGF,QAASS,KACP,GAAIC,GAAQ1B,EAAE2B,uBAAuBC,GACnCC,EAAM,SAAUC,GACd,MAAOC,OAAMC,UAAUC,MAAMC,KAAKJ,GAItC,OAFyB,gBAAd/B,GAAEoC,UAAwBpC,EAAEoC,SAASC,sBAC9CV,EAAQG,EAAIH,GAAOW,OAAOR,EAAI7B,EAAE2B,uBAAuB5B,EAAEoC,SAASC,wBAC7DV,EAGT,QAASY,KACP,GAAIC,GAAQC,UAAUC,UAAUC,aAChC,OAAO,mTAAmTC,KAAKJ,IAC7T,0kDAA0kDI,KAAKJ,EAAMK,OAAO,EAAG,IAGnmD,QAASC,GAAiBC,EAAQC,EAAIC,GAChCF,EAAOD,iBACTC,EAAOD,iBAAiBE,EAAIC,GAAU,GAC/BF,EAAOG,YACdH,EAAOG,YAAY,KAAOF,EAAIC,GAC3BF,EAAO,KAAOC,GAAMA,EAG3B,QAASG,GAAaC,GACpBA,EAAEC,gBACF,IAAIN,GAASK,EAAEE,eAAiBF,EAAEL,OAChCQ,EAAQtD,EAAEuD,cAAc,SAE1BvC,IAAgB,GAChBsC,EAAME,GAAKC,EACXH,EAAMI,YAAc,EACpBJ,EAAMK,aAAa,uBAAuB,GAC1CL,EAAMM,IAAMd,EAAOxC,MAAQwC,EAAOxC,KAAKS,QAAQ,SAAa,IAAM,KAAO,aACzE8C,EAAeP,EAAMnC,OACrBnB,EAAEkB,KAAK4C,YAAYR,GACnBA,EAAMS,QAGFC,OAAOC,KAAKC,GAAYC,OAAS,IACnCb,EAAMc,OAAS,WACbd,EAAMe,cAAcC,aAClBC,OAAQ,iBACRC,IAAKN,GACJ,OAjGT,IAAInE,EAAE0E,eAAN,CACA1E,EAAE0E,gBAAiB,CAEnB,IAAIP,GAAajE,IAsBb2B,EAAc,uBAChB6B,EAAU,wBACVI,EAAiB,SAAU1C,GACzBA,EAAMuD,SAAW,QACjBvD,EAAMwD,QAAU,QAChBxD,EAAMyD,KAAO,MACbzD,EAAM0D,IAAM,MACZ1D,EAAM2D,MAAQ,OACd3D,EAAM4D,OAAS,OACf5D,EAAM6D,OAAS,MACf7D,EAAM8D,QAAU,MAChB9D,EAAM+D,OAAS,OACf/D,EAAMgE,UAAY,SAClBhE,EAAMiE,UAAY,OAClBjE,EAAMkE,WAAa,UACnBlE,EAAMmE,gBAAkB,cACxBnE,EAAMoE,OAAS,WA6DnBxF,GAAEyF,QAAU,WACV,GAAIC,GAAUhE,IACZiE,EAAI,EACJC,EAAMF,EAAQtB,MAChB,IAAW,GAAPwB,EAAU,KAAM,mHAEpB,IAAIrD,IACF,KAAOoD,EAAIC,EAAKD,IACdD,EAAQC,GAAG/B,aAAa,SAAU,cAEpC,MAAO+B,EAAIC,EAAKD,IACd7C,EAAiB4C,EAAQC,GAAI,QAASxC,IAG5CL,EAAiB9C,EAAG,UAAW,SAAUoD,GACtB,gBAAVA,GAAEjD,MAAmC,QAAfiD,EAAEjD,KAAK0F,MAClCzC,EAAEjD,KAAK2F,SAAU,GAAQxE,EAAOrB,EAAE8F,eAAerC,MAGrD1D,EAAEyF,YACFpF,OAAQ2F","file":"../donorbox.js","sourcesContent":["(function (w, d) {\n  'use strict';\n\n  if (w.DBOX_INSTALLED) return;\n  w.DBOX_INSTALLED = true;\n\n  var UTM_PARAMS = extractUtmParams();\n\n  function extractUtmParams() {\n    var data = {};\n    var queryString = window.location.href.split('?')[1];\n    if (queryString) {\n      var supportedUtmParams = ['utm_source', 'utm_campaign', 'utm_medium', 'utm_term', 'utm_content'];\n      var params = queryString.split('&');\n      params.map(function (p) {\n        var splitted = p.split('='),\n          key = splitted[0],\n          value = splitted[1];\n\n        if (supportedUtmParams.indexOf(key) >= 0) {\n          data[key] = value;\n        }\n      });\n    }\n\n    return data;\n  }\n\n  var buttonClass = 'dbox-donation-button',\n    frameID = 'donorbox_widget_frame',\n    setFrameStyles = function (style) {\n      style.position = 'fixed';\n      style.display = 'block';\n      style.left = '0px';\n      style.top = '0px';\n      style.width = '100%';\n      style.height = '100%';\n      style.margin = '0px';\n      style.padding = '0px';\n      style.border = 'none';\n      style.overflowX = 'hidden';\n      style.overflowY = 'auto';\n      style.visibility = 'visible';\n      style.backgroundColor = 'transparent';\n      style.zIndex = 2147483647;\n    };\n\n  function toggleScrolling(disable) {\n    d.body.style.overflow = disable ? 'hidden' : 'auto';\n  }\n\n  function remove(el) {\n    el.parentNode.removeChild(el);\n    toggleScrolling()\n  }\n\n  function queryButtons() {\n    var links = d.getElementsByClassName(buttonClass),\n      arr = function (arrayLike) {\n        return Array.prototype.slice.call(arrayLike)\n      };\n    if (typeof w.DonorBox == 'object' && w.DonorBox.widgetLinkClassName)\n      links = arr(links).concat(arr(d.getElementsByClassName(w.DonorBox.widgetLinkClassName)));\n    return links;\n  }\n\n  function shouldOpenNewTab() {\n    var agent = navigator.userAgent.toLowerCase();\n    return /(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(agent) ||\n      /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(agent.substr(0, 4));\n  }\n\n  function addEventListener(target, ev, listener) {\n    if (target.addEventListener)\n      target.addEventListener(ev, listener, false);\n    else if (target.attachEvent)\n      target.attachEvent('on' + ev, listener);\n    else target['on' + ev] = ev\n  }\n\n  function openTheModal(e) {\n    e.preventDefault();\n    var target = e.currentTarget || e.target,\n      frame = d.createElement('iframe');\n\n    toggleScrolling(true);\n    frame.id = frameID;\n    frame.frameborder = 0;\n    frame.setAttribute('allowpaymentrequest', true);\n    frame.src = target.href + (target.href.indexOf('?') == -1 ? '?' : '&') + 'modal=true';\n    setFrameStyles(frame.style);\n    d.body.appendChild(frame);\n    frame.focus();\n\n    // Send UTM Params to donorbox iframes\n    if (Object.keys(UTM_PARAMS).length > 0) {\n      frame.onload = function () {\n        frame.contentWindow.postMessage({\n          action: 'set-utm-params',\n          msg: UTM_PARAMS\n        }, '*');\n      };\n    }\n  }\n\n  w.dw_open = function () {\n    var buttons = queryButtons(),\n      i = 0,\n      len = buttons.length;\n    if (len == 0) throw 'Donation widget button is not exists. If you see these on your WEB page, please, check button installation steps.';\n\n    if (shouldOpenNewTab())\n      for (; i < len; i++)\n        buttons[i].setAttribute('target', '_blank');\n    else\n      for (; i < len; i++)\n        addEventListener(buttons[i], 'click', openTheModal)\n  };\n\n  addEventListener(w, 'message', function (e) {\n    typeof e.data == 'object' && e.data.from == 'dbox' &&\n      e.data.close === true && remove(d.getElementById(frameID))\n  });\n\n  w.dw_open();\n}(window, document));\n"]}